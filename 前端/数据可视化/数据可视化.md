# 数据可视化

## 1. 数据可视化
常见的数据可视化库：
* D3.js
* ECharts.js
* Highcharts.js  国外的
* AntV

## 2. ECharts
底层依赖矢量图形库ZRender

### 2.1 ECharts使用：
1. 下载并引入echarts.js文件(图标依赖这个js库)
2. 准备一个具备大小的DOM容器(生成的图表会放入这个容器内)
3. 初始化echarts实例对象(实例化echarts对象)
4. 指定配置项和数据(option)(根据具体需求修改配置选项)
5. 将配置项设置给echarts实例对象(让echarts对象根据修改好的配置生效)
```html
<script>
  (function() {
    // 3. 实例化对象
    var myChart = echarts.init(document.querySelector(".pie"));
    // 4. 指定配置项和数据
    var option = {
      tooltip: {
        // trigger 触发方式 非轴图形，使用item的意思是放到数据对应图形上触发提示
        trigger: "item",
        // 格式化提示内容：
        // a代表series系列图标名称
        // b代表series数据名称data里面的name
        // c代表series数据值data里面的value
        // d代表 当前数据/总数据的比例
        formatter: "{a} <br/>{b} : {c} ({d}%)"
      },
      // 注意颜色写的位置
      color: [
        "#006cff",
        "#60cda0",
        "#ed8884",
        "#ff9f7f",
        "#0096ff",
        "#9fe6b8",
        "#32c5e9",
        "#1d9dff"
      ],
      // 控制图标
      series: [{
        // 图标名称
        name: "点位统计",
        // 图标类型
        type: "pie",
        // 如果radius是百分比则必须加引号
        // radius 饼形图半径 可以是像素 也可以是百分比(基于DOM容器大小) 第一项是内半径 第二项是外半径(通过它可以实现饼形图大小)
        radius: ["10%", "70%"],
        // 图标中心位置left 50%  top 50%  距离图表DOM容器
        center: ["50%", "50%"],
        // radius: 半径模式 另外一种是area面积模式
        roseType: "radius",
        // 数据集value数据的值 name数据的名称
        data: [
          { value: 20, name: "云南" },
          { value: 26, name: "北京" },
          { value: 24, name: "山东" },
          { value: 25, name: "河北" },
          { value: 20, name: "江苏" },
          { value: 25, name: "浙江" },
          { value: 30, name: "四川" },
          { value: 42, name: "湖北" }
        ],
        // 修饰饼形图文字相关的样式 label对象
        label: {
          fontSize: 10
        },
        // 修饰引导线样式
        labelLine: {
          // 连接到图形的线长度
          length: 6,
          // 连接到文字的线长度
          length2: 8
        }
      }]
    };
    // 5. 配置项和数据给我们的实例化对象
    myChart.setOption(option);
  })();
</script>
```
### 2.2 相关配置
* title：标题组件
* tooltip：提示框组件
* legend: 图例组件
* toolbox: 工具栏
* grid: 直角坐标系内绘图网格
* xAxis: 直角坐标系grid中的x轴
* yAxis：直角坐标系grid中的y轴
* series: 系列列表。每个系列通过type决定自己的图标类型(什么类型的图标)
* color: 调色盘颜色列表
## 3. 数据可视化项目开发

### 3.1 项目需求

1. 适配方案
* flexible.js 检测浏览器宽度 修改html文字大小
* rem单位 页面元素根据rem适配大小 配合插件
* flex布局 页面快速布局

2. 项目基础布局

#### 边框图片(border-image)
* 边框图片使用场景
* 边框图片的切图原理
    * 把四个角切出去，中间部分可以铺排、拉伸或者环绕(按照上右下左的顺序切割)
* 边框图片语法规范
  * border-image-source 路径
  * border-image-slice 图片边框向内偏移(裁剪的尺寸，一定不加单位，上右下左顺序)
  * border-image-width 图片边框的宽度(需要加单位)(不是边框的宽度是边框图片的宽度)
  * border-image-repeat 图像边框是否应平铺(repeat)、铺满(round)或拉伸(stretch) 默认拉伸

### 3.2 样式开发
1. 面板类：.panel
2. 概览区域: .overview
3. 监控区域: .monitor
#### 通过类名调用字体图标
1. Html页面引入字体图标中css文件(style.css)
2. 标签直接调用图标对应的类名即可(类名在css文件中标注)

#### 立即执行函数
> 多个立即执行函数中间必须加分号隔开

#### 无缝滚动原理
1. 克隆滚动内容所有的行(row)
2. 通过css3动画滚动
3. 鼠标经过就停止动画
> animation-play-state:paused;

#### 柱形图-单独修改其中某个柱形样式
核心原理：series对象里面的data数组，里面的每一个数据影响每一个柱形
重要的是，*data数组里面除了直接写数字，还可以是对象*
```js
(function() {
    var item = {
        name: "",
        value: 1200,
        // 1. 修改当前柱形的样式
        itemStyle: {
            color: "#254065"
        },
        // 2. 鼠标放到柱子上不想高亮显示
        emphasis: {
            itemStyle: {
                color: "#254065"
            }
        },
        // 3. 鼠标经过柱子不显示提示框组件
        tooltip: {
            extraCssText: "opacity: 0"
        }
    };
    // 1. 实例化对象
    var myChart = echarts.init(document.querySelector(".bar"));
    // 2. 指定配置和数据
    var option = {
        color: new echarts.graphic.LinearGradient(
            // (x1,y2) 点到点 (x2,y2) 之间进行渐变
            0,
            0,
            0,
            1, [
                { offset: 0, color: "#00fffb" }, // 0 起始颜色
                { offset: 1, color: "#0061ce" } // 1 结束颜色
            ]
        ),
        tooltip: {
            trigger: "item"
        },
        grid: {
            left: "0%",
            right: "3%",
            bottom: "3%",
            top: "3%",
            //  图表位置紧贴画布边缘是否显示刻度以及label文字 防止坐标轴标签溢出跟grid 区域有关系
            containLabel: true,
            // 是否显示直角坐标系网格
            show: true,
            //grid 四条边框的颜色
            borderColor: "rgba(0, 240, 255, 0.3)"
        },
        xAxis: [{
            type: "category",
            data: [
                "上海",
                "广州",
                "北京",
                "深圳",
                "合肥",
                "",
                "......",
                "",
                "杭州",
                "厦门",
                "济南",
                "成都",
                "重庆"
            ],
            axisTick: {
                alignWithLabel: false,
                // 把x轴的刻度隐藏起来
                show: false
            },
            axisLabel: {
                color: "#4c9bfd"
            },
            // x轴这条线的颜色样式
            axisLine: {
                lineStyle: {
                    color: "rgba(0, 240, 255, 0.3)"
                        // width: 3
                }
            }
        }],
        yAxis: [{
            type: "value",
            axisTick: {
                alignWithLabel: false,
                // 把y轴的刻度隐藏起来
                show: false
            },
            axisLabel: {
                color: "#4c9bfd"
            },
            // y轴这条线的颜色样式
            axisLine: {
                lineStyle: {
                    color: "rgba(0, 240, 255, 0.3)"
                        // width: 3
                }
            },
            // y轴分割线的颜色样式
            splitLine: {
                lineStyle: {
                    color: "rgba(0, 240, 255, 0.3)"
                }
            }
        }],
        series: [{
            name: "直接访问",
            type: "bar",
            barWidth: "60%",
            data: [
                2100,
                1900,
                1700,
                1560,
                1400,
                item,
                item,
                item,
                900,
                750,
                600,
                480,
                240
            ]
        }]
    };
    // 3. 把配置给实例对象
    myChart.setOption(option);
    // 4. 当我们浏览器缩放的时候，图表也等比例缩放
    window.addEventListener("resize", function() {
        // 让我们的图表调用 resize这个方法
        myChart.resize();
    });
})();
```
#### 半圆形做法原理
把一个饼形图分成三段，下面一段颜色设为透明即可
```js
(function() {
    // 1. 实例化对象
    var myChart = echarts.init(document.querySelector(".gauge"));
    // 2. 指定数据和配置
    var option = {
        series: [{
            name: "销售进度",
            type: "pie",
            radius: ["130%", "150%"],
            // 移动下位置  套住50%文字
            center: ["48%", "80%"],
            //是否启用防止标签重叠策略
            // avoidLabelOverlap: false,
            labelLine: {
                normal: {
                    show: false
                }
            },
            // 饼形图的起始角度为 180， 注意不是旋转角度
            startAngle: 180,
            // 鼠标经过不需要放大偏移图形
            hoverOffset: 0,
            data: [{
                    value: 100,
                    itemStyle: {
                        // 颜色渐变#00c9e0->#005fc1
                        color: new echarts.graphic.LinearGradient(
                            // (x1,y2) 点到点 (x2,y2) 之间进行渐变
                            0,
                            0,
                            0,
                            1, [
                                { offset: 0, color: "#00c9e0" }, // 0 起始颜色
                                { offset: 1, color: "#005fc1" } // 1 结束颜色
                            ]
                        )
                    }
                },
                {
                    value: 100,
                    itemStyle: {
                        color: "#12274d"
                    }
                },
                {
                    value: 200,
                    itemStyle: {
                        color: "transparent"
                    }
                }
            ]
        }]
    };
    // 3. 把数据和配置给实例对象
    myChart.setOption(option);
    // 当我们浏览器缩放的时候，图表也等比例缩放
    window.addEventListener("resize", function() {
        // 让我们的图表调用 resize这个方法
        myChart.resize();
    });
})();
```



### ES6模板字符

```
 `${表达式}`  模板字符使用反钩号`` 而且允许自由换行
  
  eg:
    console.log(`<span>${arr.name}</span><span>${arr.age}</span>`)
```