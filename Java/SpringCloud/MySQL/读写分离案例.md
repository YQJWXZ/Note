## 读写分离

1. 使用Sharding-JDBC实现读写分离步骤：
* 导坐标
```xml
<dependency>
    <groupId>org.apache.shardingsphere</groupId>
    <artifactId>sharding-jdbc-spring-boot-starter</artifactId>
    <version>4.0.0-RC1</version>
</dependency>
```
* 配置文件中配置读写分离规则
```yaml
spring:
  shardingsphere:
    datasources:
      names:
        master,slave
      # 主数据源
      master:
        type: com.alibaba.druid.pool.DruidDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://192.168.138.100:3306/rw?characterEncoding=utf-8
        username: root
        password: root
      # 从数据源
      slave1:
        type: com.alibaba.druid.pool.DruidDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://192.168.138.101:3306/rw?characterEncoding=utf-8
        username: root
        password: root
      slave2:
        type: com.alibaba.druid.pool.DruidDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://192.168.138.102:3306/rw?characterEncoding=utf-8
        username: root
        password: root
    masterslave:
        # 读写分离配置
        load-balance-algorithm-type: round_robin # 轮询
        # 最终的数据源名称
        name: dataSource
        # 主库数据源名称
        master-data-source-name: master
        # 从数据库名称列表
        slave-data-source-names: slave1,slave2
    props:
      sql:
        show: true # 开启SQL显示
```
* 配置文件中配置允许bean定义覆盖配置项
```yaml
spring:
  main:
    allow-bean-definition-overriding: true
```