# 1.依赖注入方式

## 1. setter注入
* 引用类型
  1. 在bean中定义引用类型属性并提供可访问的set方法
  2. 配置中使用property标签**ref**属性注入引用类型对象

* 简单类型（基本数据类型和String）
  1. 在bean中定义引用类型属性并提供可访问的set方法
  2. 配置中使用property标签**value**属性注入简单类型对象

## 2. 构造器注入
* 引用类型
  1. 在bean中定义引用类型属性并提供可访问的构造方法
  2. 配置中使用constructor-arg标签**ref**属性注入引用类型对象
* 简单类型
  1. 在bean中定义引用类型属性并提供可访问的set方法
  2. 配置中使用constructor-arg标签**value**属性注入简单类型对象

```参数适配问题：
          1. 配置中使用constructor-arg标签type属性设置按形参类型注入（不可靠）
          2. 配置中使用constructor-arg标签index属性设置形参位置注入
```

依赖注入方式选择：
1. 强制依赖 --> 使用构造器
2. 可选依赖 --> setter注入,灵活性强
3. 框架  --> 大多采用构造器注入
4. 自己开发的模块推荐使用setter注入

# 2. 依赖自动装配
IoC容器根据bean所依赖的资源在容器中自动查找并注入到bean中的过程称为自动装配

常见自动装配方式：
* 按类型（常用）
* 按名称

``配置中使用bean标签autowire属性设置自动装配的类型``

# 3. 集合注入
* array、list、set:

```
    <property name="list">
          <list>
                    <value>itcast</value>
                    <value>itheima</value>
                    <value>boxuegu</value>
          </list>
   </property>
```

* map

```
    <property name="map">
          <map>
                    <entry key="country" value="china"/>
                    <entry key="province" value="henan"/>
                    <entry key="city" value="kaifeng"/>
          </map>
   </property>
```

* properties

```
    <property name="properties">
          <props>
                    <prop key="country">china</prop>
                    <prop key="province">henan</prop>
                    <prop key="city">kaifeng</prop>
          </props>
   </property>
```

## 4. 加载properties配置文件
加载properties文件：
1. 开启context命名空间

```
xmlns:context="http://www.springframework.org/schema/context"
xsi: schemalocationn="
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd
            
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context.xsd
            ">
```

2. 使用context空间加载properties文件
>      <context:property-placeholder location="jdbc.properties"/>

>      <context:property-placeholder location="jdbc.properties" system-propertiies-mode="NEVER"/>  不加载系统属性，不加载系统环境变量

>      <context:property-placeholder location="classpath*:*.properties" system-propertiies-mode="NEVER"/>  加载多个配置文件，不仅可以从本工程文件中读，还可以从第三方jar包中去读

3. 使用属性占位符${}读取properties文件中的属性

```
  <bean class="com.alibaba.druid.pool.DruidDataSource">
        <property name="driverClassName" value="${jdbc.driver}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
  </bean>
```